
def foo(b)
    local.c = false

    if local.b
        global.test = "was true"
        return "val is true"
    else
        global.test = "was false"
    end

    local.fac = fac(5)
    local.test = _eq(local.fac, 120)
    if local.test
        global.data3 = true
    else
        global.data4 = global.test
    end

    return "val is false"
end

def fac(num)
    local.isOne = _eq(local.num, 1)
    if local.isOne
        return local.num
    end

    local.aux = _sub(local.num, 1)
    local.recRes = fac(local.aux)
    local.res = _mul(local.num, local.recRes)
    return local.res
end

def main(msg)
    local.a = false
    local.b = true

    if local.a
        local.obj.a = -10
    else if local.b
        local.obj.a = "str"
    end

    local.x = _eq(local.msg, "type1")
    if local.x
        global.data1 = local.msg
    else
        local.x = _eq(local.msg, "type2")
        if local.x
            global.data2 = local.msg
        end
    end

    local.obj.num = 10000
    local.obj.obj.str = local.msg
    local.obj.obj2.obj3.aVal = foo(local.a)
    local.obj.obj2.obj3.bVal = foo(local.b)
    local.obj.num1 = local.obj1
    local.obj.str = null

    global.a = _add(1000, -123)
    global.a = _div(global.a, 100)
    global.obj.msg = "msg test"
    global.obj.num = 100.0

    local.obj.a = global.a
    local.obj.glbCopy = global.obj

    local.obj.factorial = fac(17)

    return local.obj
end
